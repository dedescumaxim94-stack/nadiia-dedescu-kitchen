<main class="recipe-page">
  <article class="recipe-hero-card">
    <figure class="recipe-hero-media-wrap">
      <img src="<%= image %>" alt="<%= title %>" class="recipe-hero-media" />
    </figure>

    <div class="recipe-hero-copy">
      <% if (categoryTitle) { %>
        <p class="eyebrow"><%= categoryTitle %></p>
      <% } %>
      <h2><%= subtitle || title %></h2>
      <p class="recipe-desc"><%= description %></p>

      <div class="meta-tags">
        <% if (prepMinutes !== null && prepMinutes !== undefined) { %>
          <span data-meta-prep data-base-minutes="<%= prepMinutes %>">â± <%= prepMinutes %> min Prep</span>
        <% } %>
        <% if (cookMinutes !== null && cookMinutes !== undefined) { %>
          <span data-meta-cook data-base-minutes="<%= cookMinutes %>">ğŸ”¥ <%= cookMinutes %> min Cook</span>
        <% } %>
        <% if (serves) { %>
          <span data-meta-serves>ğŸ‘¥ Serves <%= serves %></span>
        <% } %>
      </div>
    </div>
  </article>

  <div class="recipe-layout">
    <section class="ingredients-panel">
      <div class="ingredients-header">
        <h3>Ingredients</h3>
        <% if (serves) { %>
          <div class="servings-control" data-base-serves="<%= serves %>">
            <span>Serves</span>
            <button type="button" class="servings-btn" data-servings-decrease>-</button>
            <input type="number" min="1" step="1" value="<%= serves %>" class="servings-input" data-servings-input />
            <button type="button" class="servings-btn" data-servings-increase>+</button>
          </div>
        <% } %>
      </div>

      <div class="ingredients-visual-grid">
        <% ingredients.forEach(function(ingredient) { %>
          <figure class="ingredient-item">
            <img src="<%= ingredient.image %>" alt="<%= ingredient.name %>" />
            <figcaption>
              <span class="ingredient-name"><%= ingredient.name %></span>
              <% if (ingredient.amount) { %>
                <small
                  class="ingredient-amount"
                  data-ingredient-amount
                  data-amount-value="<%= ingredient.amountValue ?? '' %>"
                  data-amount-unit="<%= ingredient.amountUnit ?? '' %>"
                  data-original-amount="<%= ingredient.amount %>"
                ><%= ingredient.amount %></small>
              <% } %>
            </figcaption>
          </figure>
        <% }); %>
      </div>
    </section>

    <section class="instructions-panel">
      <h3>Instructions</h3>
      <ol class="steps-list">
        <% instructions.forEach(function(step) { %>
          <li>
            <% if (step.title) { %><strong><%= step.title %></strong><% } %>
            <%= step.text %>
          </li>
        <% }); %>
      </ol>
    </section>
  </div>

  <% if (tips && tips.length) { %>
    <aside class="tips-panel">
      <h3><%= tipsTitle || 'Kitchen Tips' %></h3>
      <ul>
        <% tips.forEach(function(tip) { %>
          <li><%= tip %></li>
        <% }); %>
      </ul>
    </aside>
  <% } %>
</main>
